{% extends 'base.html' %}

{% block title  %} RESULTS {% endblock %}

{% block content %}
<div class="parent-container">
    <div class="loader flex flex-column align-center">
        <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
        <lottie-player src="https://assets9.lottiefiles.com/private_files/lf30_xkvrpcwa.json"  background="transparent"  speed="1"  style="width: 300px; height: 300px;"  loop autoplay></lottie-player>
        <div>Scanning file</div>
    </div>
    <div class="results" style="display:none;">
        {% if "CLEAN" in result %}
            <div class="pt-5 flex    flex-column align-center">
                <h2 style="color:green">Clean</h2>
                <h4>No virus detected for this file. You are safe!</h4>
                <a class="btn btn-primary" href="{{ url_for('web.index') }}">Home</a>
            </div>
        {% else %}
            <div class="pt-5 flex flex-column align-center">
                <h2 style="color:red">The file contains the following suspicious patterns:</h2>
                <div >
                    {% for r in result %}
                    <div class="card m-3 p-3">
                        <div style="font-weight: 600;">Name: {{ r.name }}</div>
                        <div>Description: {{ r.description }}</div>
                    </div>
                    {% endfor %}
                </div>
                <a class="btn btn-primary" href="{{ url_for('web.index') }}">Home</a>
            </div> 
        {% endif %}
    </div>
</div>


<script>

// hide loader and show results after 2 seconds
setTimeout(function() {
    document.querySelector('.loader').style.display = 'none';
    document.querySelector('.results').style.display = 'block';
}, 10);
</script>
{% endblock %}